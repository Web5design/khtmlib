<html>
<head>
<title>automatic map zoom</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0; minimum-scale=1.0, user-scalable= 0"/>

<meta name="apple-mobile-web-app-capable" content="yes"/>

<script type="text/javascript" src="../../khtml.js"> </script>

<script type="text/javascript">


function init(){

        var centerLat=48.2;
        var centerLon=15.633;


        map=new kmap(document.getElementById("map"));

        var p1=new kPoint(-50,-180);
        var p2=new kPoint(75,180);
        var b=new kBounds(p1,p2);
        map.setBounds(b);

        map.addCallbackFunction(sendposition);

}

var blocked=false;
var last=null;
function sendposition(){
	clearTimeout(last);
	last=setTimeout("sendposition()",1000);
	if(blocked) return;
	blocked=true;
	var center=map.getCenter();
	var lat=center.getLat();
	var lng=center.getLng();
	var zoom=map.getZoom();
	var url="manager.php?lat="+lat+"&lng="+lng+"&zoom="+zoom;
	var xmlhttp=new XMLHttpRequest();
	xmlhttp.open("GET",url,true);
	xmlhttp.send(null);
	setTimeout("blocked=false",500);
	
}


</script>
</head>
<body onload="init()" style="margin:0">
<div style="position:absolute;top:0px;left:0px;z-index:10">
</div>
<div id="map" style="position:absolute;top:0px;width:100%;height:100%"> </div>

</body>
</html>
